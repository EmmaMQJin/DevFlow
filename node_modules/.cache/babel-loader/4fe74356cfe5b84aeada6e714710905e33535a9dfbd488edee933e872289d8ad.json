{"ast":null,"code":"import { Decoration, showPanel, EditorView, ViewPlugin, logException, gutter, showTooltip, hoverTooltip, getPanel, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\nclass SelectedDiagnostic {\n  constructor(from, to, diagnostic) {\n    this.from = from;\n    this.to = to;\n    this.diagnostic = diagnostic;\n  }\n}\nclass LintState {\n  constructor(diagnostics, panel, selected) {\n    this.diagnostics = diagnostics;\n    this.panel = panel;\n    this.selected = selected;\n  }\n  static init(diagnostics, panel, state) {\n    // Filter the list of diagnostics for which to create markers\n    let markedDiagnostics = diagnostics;\n    let diagnosticFilter = state.facet(lintConfig).markerFilter;\n    if (diagnosticFilter) markedDiagnostics = diagnosticFilter(markedDiagnostics, state);\n    let ranges = Decoration.set(markedDiagnostics.map(d => {\n      // For zero-length ranges or ranges covering only a line break, create a widget\n      return d.from == d.to || d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from ? Decoration.widget({\n        widget: new DiagnosticWidget(d),\n        diagnostic: d\n      }).range(d.from) : Decoration.mark({\n        attributes: {\n          class: \"cm-lintRange cm-lintRange-\" + d.severity + (d.markClass ? \" \" + d.markClass : \"\")\n        },\n        diagnostic: d,\n        inclusive: true\n      }).range(d.from, d.to);\n    }), true);\n    return new LintState(ranges, panel, findDiagnostic(ranges));\n  }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n  let found = null;\n  diagnostics.between(after, 1e9, (from, to, {\n    spec\n  }) => {\n    if (diagnostic && spec.diagnostic != diagnostic) return;\n    found = new SelectedDiagnostic(from, to, spec.diagnostic);\n    return false;\n  });\n  return found;\n}\nfunction hideTooltip(tr, tooltip) {\n  let line = tr.startState.doc.lineAt(tooltip.pos);\n  return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, line.to));\n}\nfunction maybeEnableLint(state, effects) {\n  return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\r\nReturns a transaction spec which updates the current set of\r\ndiagnostics, and enables the lint extension if if wasn't already\r\nactive.\r\n*/\nfunction setDiagnostics(state, diagnostics) {\n  return {\n    effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n  };\n}\n/**\r\nThe state effect that updates the set of active diagnostics. Can\r\nbe useful when writing an extension that needs to track these.\r\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n  create() {\n    return new LintState(Decoration.none, null, null);\n  },\n  update(value, tr) {\n    if (tr.docChanged) {\n      let mapped = value.diagnostics.map(tr.changes),\n        selected = null;\n      if (value.selected) {\n        let selPos = tr.changes.mapPos(value.selected.from, 1);\n        selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n      }\n      value = new LintState(mapped, value.panel, selected);\n    }\n    for (let effect of tr.effects) {\n      if (effect.is(setDiagnosticsEffect)) {\n        value = LintState.init(effect.value, value.panel, tr.state);\n      } else if (effect.is(togglePanel)) {\n        value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n      } else if (effect.is(movePanelSelection)) {\n        value = new LintState(value.diagnostics, value.panel, effect.value);\n      }\n    }\n    return value;\n  },\n  provide: f => [showPanel.from(f, val => val.panel), EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\r\nReturns the number of active lint diagnostics in the given state.\r\n*/\nfunction diagnosticCount(state) {\n  let lint = state.field(lintState, false);\n  return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({\n  class: \"cm-lintRange cm-lintRange-active\",\n  inclusive: true\n});\nfunction lintTooltip(view, pos, side) {\n  let {\n    diagnostics\n  } = view.state.field(lintState);\n  let found = [],\n    stackStart = 2e8,\n    stackEnd = 0;\n  diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, {\n    spec\n  }) => {\n    if (pos >= from && pos <= to && (from == to || (pos > from || side > 0) && (pos < to || side < 0))) {\n      found.push(spec.diagnostic);\n      stackStart = Math.min(from, stackStart);\n      stackEnd = Math.max(to, stackEnd);\n    }\n  });\n  let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n  if (diagnosticFilter) found = diagnosticFilter(found, view.state);\n  if (!found.length) return null;\n  return {\n    pos: stackStart,\n    end: stackEnd,\n    above: view.state.doc.lineAt(stackStart).to < stackEnd,\n    create() {\n      return {\n        dom: diagnosticsTooltip(view, found)\n      };\n    }\n  };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n  return elt(\"ul\", {\n    class: \"cm-tooltip-lint\"\n  }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\r\nCommand to open and focus the lint panel.\r\n*/\nconst openLintPanel = view => {\n  let field = view.state.field(lintState, false);\n  if (!field || !field.panel) view.dispatch({\n    effects: maybeEnableLint(view.state, [togglePanel.of(true)])\n  });\n  let panel = getPanel(view, LintPanel.open);\n  if (panel) panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n  return true;\n};\n/**\r\nCommand to close the lint panel, when open.\r\n*/\nconst closeLintPanel = view => {\n  let field = view.state.field(lintState, false);\n  if (!field || !field.panel) return false;\n  view.dispatch({\n    effects: togglePanel.of(false)\n  });\n  return true;\n};\n/**\r\nMove the selection to the next diagnostic.\r\n*/\nconst nextDiagnostic = view => {\n  let field = view.state.field(lintState, false);\n  if (!field) return false;\n  let sel = view.state.selection.main,\n    next = field.diagnostics.iter(sel.to + 1);\n  if (!next.value) {\n    next = field.diagnostics.iter(0);\n    if (!next.value || next.from == sel.from && next.to == sel.to) return false;\n  }\n  view.dispatch({\n    selection: {\n      anchor: next.from,\n      head: next.to\n    },\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\r\nMove the selection to the previous diagnostic.\r\n*/\nconst previousDiagnostic = view => {\n  let {\n      state\n    } = view,\n    field = state.field(lintState, false);\n  if (!field) return false;\n  let sel = state.selection.main;\n  let prevFrom, prevTo, lastFrom, lastTo;\n  field.diagnostics.between(0, state.doc.length, (from, to) => {\n    if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n      prevFrom = from;\n      prevTo = to;\n    }\n    if (lastFrom == null || from > lastFrom) {\n      lastFrom = from;\n      lastTo = to;\n    }\n  });\n  if (lastFrom == null || prevFrom == null && lastFrom == sel.from) return false;\n  view.dispatch({\n    selection: {\n      anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom,\n      head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo\n    },\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\r\nA set of default key bindings for the lint functionality.\r\n\r\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\r\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\r\n*/\nconst lintKeymap = [{\n  key: \"Mod-Shift-m\",\n  run: openLintPanel,\n  preventDefault: true\n}, {\n  key: \"F8\",\n  run: nextDiagnostic\n}];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n  constructor(view) {\n    this.view = view;\n    this.timeout = -1;\n    this.set = true;\n    let {\n      delay\n    } = view.state.facet(lintConfig);\n    this.lintTime = Date.now() + delay;\n    this.run = this.run.bind(this);\n    this.timeout = setTimeout(this.run, delay);\n  }\n  run() {\n    let now = Date.now();\n    if (now < this.lintTime - 10) {\n      this.timeout = setTimeout(this.run, this.lintTime - now);\n    } else {\n      this.set = false;\n      let {\n          state\n        } = this.view,\n        {\n          sources\n        } = state.facet(lintConfig);\n      if (sources.length) Promise.all(sources.map(source => Promise.resolve(source(this.view)))).then(annotations => {\n        let all = annotations.reduce((a, b) => a.concat(b));\n        if (this.view.state.doc == state.doc) this.view.dispatch(setDiagnostics(this.view.state, all));\n      }, error => {\n        logException(this.view.state, error);\n      });\n    }\n  }\n  update(update) {\n    let config = update.state.facet(lintConfig);\n    if (update.docChanged || config != update.startState.facet(lintConfig) || config.needsRefresh && config.needsRefresh(update)) {\n      this.lintTime = Date.now() + config.delay;\n      if (!this.set) {\n        this.set = true;\n        this.timeout = setTimeout(this.run, config.delay);\n      }\n    }\n  }\n  force() {\n    if (this.set) {\n      this.lintTime = Date.now();\n      this.run();\n    }\n  }\n  destroy() {\n    clearTimeout(this.timeout);\n  }\n});\nconst lintConfig = /*@__PURE__*/Facet.define({\n  combine(input) {\n    return Object.assign({\n      sources: input.map(i => i.source).filter(x => x != null)\n    }, combineConfig(input.map(i => i.config), {\n      delay: 750,\n      markerFilter: null,\n      tooltipFilter: null,\n      needsRefresh: null\n    }, {\n      needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n    }));\n  }\n});\n/**\r\nGiven a diagnostic source, this function returns an extension that\r\nenables linting with that source. It will be called whenever the\r\neditor is idle (after its content changed). If `null` is given as\r\nsource, this only configures the lint extension.\r\n*/\nfunction linter(source, config = {}) {\n  return [lintConfig.of({\n    source,\n    config\n  }), lintPlugin, lintExtensions];\n}\n/**\r\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\r\neditor is idle to run right away.\r\n*/\nfunction forceLinting(view) {\n  let plugin = view.plugin(lintPlugin);\n  if (plugin) plugin.force();\n}\nfunction assignKeys(actions) {\n  let assigned = [];\n  if (actions) actions: for (let {\n    name\n  } of actions) {\n    for (let i = 0; i < name.length; i++) {\n      let ch = name[i];\n      if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n        assigned.push(ch);\n        continue actions;\n      }\n    }\n    assigned.push(\"\");\n  }\n  return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n  var _a;\n  let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n  return elt(\"li\", {\n    class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity\n  }, elt(\"span\", {\n    class: \"cm-diagnosticText\"\n  }, diagnostic.renderMessage ? diagnostic.renderMessage() : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n    let fired = false,\n      click = e => {\n        e.preventDefault();\n        if (fired) return;\n        fired = true;\n        let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n        if (found) action.apply(view, found.from, found.to);\n      };\n    let {\n        name\n      } = action,\n      keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n    let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex), elt(\"u\", name.slice(keyIndex, keyIndex + 1)), name.slice(keyIndex + 1)];\n    return elt(\"button\", {\n      type: \"button\",\n      class: \"cm-diagnosticAction\",\n      onclick: click,\n      onmousedown: click,\n      \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n    }, nameElt);\n  }), diagnostic.source && elt(\"div\", {\n    class: \"cm-diagnosticSource\"\n  }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n  constructor(diagnostic) {\n    super();\n    this.diagnostic = diagnostic;\n  }\n  eq(other) {\n    return other.diagnostic == this.diagnostic;\n  }\n  toDOM() {\n    return elt(\"span\", {\n      class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity\n    });\n  }\n}\nclass PanelItem {\n  constructor(view, diagnostic) {\n    this.diagnostic = diagnostic;\n    this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n    this.dom = renderDiagnostic(view, diagnostic, true);\n    this.dom.id = this.id;\n    this.dom.setAttribute(\"role\", \"option\");\n  }\n}\nclass LintPanel {\n  constructor(view) {\n    this.view = view;\n    this.items = [];\n    let onkeydown = event => {\n      if (event.keyCode == 27) {\n        // Escape\n        closeLintPanel(this.view);\n        this.view.focus();\n      } else if (event.keyCode == 38 || event.keyCode == 33) {\n        // ArrowUp, PageUp\n        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n      } else if (event.keyCode == 40 || event.keyCode == 34) {\n        // ArrowDown, PageDown\n        this.moveSelection((this.selectedIndex + 1) % this.items.length);\n      } else if (event.keyCode == 36) {\n        // Home\n        this.moveSelection(0);\n      } else if (event.keyCode == 35) {\n        // End\n        this.moveSelection(this.items.length - 1);\n      } else if (event.keyCode == 13) {\n        // Enter\n        this.view.focus();\n      } else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) {\n        // A-Z\n        let {\n            diagnostic\n          } = this.items[this.selectedIndex],\n          keys = assignKeys(diagnostic.actions);\n        for (let i = 0; i < keys.length; i++) if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n          let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n          if (found) diagnostic.actions[i].apply(view, found.from, found.to);\n        }\n      } else {\n        return;\n      }\n      event.preventDefault();\n    };\n    let onclick = event => {\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i].dom.contains(event.target)) this.moveSelection(i);\n      }\n    };\n    this.list = elt(\"ul\", {\n      tabIndex: 0,\n      role: \"listbox\",\n      \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n      onkeydown,\n      onclick\n    });\n    this.dom = elt(\"div\", {\n      class: \"cm-panel-lint\"\n    }, this.list, elt(\"button\", {\n      type: \"button\",\n      name: \"close\",\n      \"aria-label\": this.view.state.phrase(\"close\"),\n      onclick: () => closeLintPanel(this.view)\n    }, \"×\"));\n    this.update();\n  }\n  get selectedIndex() {\n    let selected = this.view.state.field(lintState).selected;\n    if (!selected) return -1;\n    for (let i = 0; i < this.items.length; i++) if (this.items[i].diagnostic == selected.diagnostic) return i;\n    return -1;\n  }\n  update() {\n    let {\n      diagnostics,\n      selected\n    } = this.view.state.field(lintState);\n    let i = 0,\n      needsSync = false,\n      newSelectedItem = null;\n    diagnostics.between(0, this.view.state.doc.length, (_start, _end, {\n      spec\n    }) => {\n      let found = -1,\n        item;\n      for (let j = i; j < this.items.length; j++) if (this.items[j].diagnostic == spec.diagnostic) {\n        found = j;\n        break;\n      }\n      if (found < 0) {\n        item = new PanelItem(this.view, spec.diagnostic);\n        this.items.splice(i, 0, item);\n        needsSync = true;\n      } else {\n        item = this.items[found];\n        if (found > i) {\n          this.items.splice(i, found - i);\n          needsSync = true;\n        }\n      }\n      if (selected && item.diagnostic == selected.diagnostic) {\n        if (!item.dom.hasAttribute(\"aria-selected\")) {\n          item.dom.setAttribute(\"aria-selected\", \"true\");\n          newSelectedItem = item;\n        }\n      } else if (item.dom.hasAttribute(\"aria-selected\")) {\n        item.dom.removeAttribute(\"aria-selected\");\n      }\n      i++;\n    });\n    while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n      needsSync = true;\n      this.items.pop();\n    }\n    if (this.items.length == 0) {\n      this.items.push(new PanelItem(this.view, {\n        from: -1,\n        to: -1,\n        severity: \"info\",\n        message: this.view.state.phrase(\"No diagnostics\")\n      }));\n      needsSync = true;\n    }\n    if (newSelectedItem) {\n      this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n      this.view.requestMeasure({\n        key: this,\n        read: () => ({\n          sel: newSelectedItem.dom.getBoundingClientRect(),\n          panel: this.list.getBoundingClientRect()\n        }),\n        write: ({\n          sel,\n          panel\n        }) => {\n          let scaleY = panel.height / this.list.offsetHeight;\n          if (sel.top < panel.top) this.list.scrollTop -= (panel.top - sel.top) / scaleY;else if (sel.bottom > panel.bottom) this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n        }\n      });\n    } else if (this.selectedIndex < 0) {\n      this.list.removeAttribute(\"aria-activedescendant\");\n    }\n    if (needsSync) this.sync();\n  }\n  sync() {\n    let domPos = this.list.firstChild;\n    function rm() {\n      let prev = domPos;\n      domPos = prev.nextSibling;\n      prev.remove();\n    }\n    for (let item of this.items) {\n      if (item.dom.parentNode == this.list) {\n        while (domPos != item.dom) rm();\n        domPos = item.dom.nextSibling;\n      } else {\n        this.list.insertBefore(item.dom, domPos);\n      }\n    }\n    while (domPos) rm();\n  }\n  moveSelection(selectedIndex) {\n    if (this.selectedIndex < 0) return;\n    let field = this.view.state.field(lintState);\n    let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n    if (!selection) return;\n    this.view.dispatch({\n      selection: {\n        anchor: selection.from,\n        head: selection.to\n      },\n      scrollIntoView: true,\n      effects: movePanelSelection.of(selection)\n    });\n  }\n  static open(view) {\n    return new LintPanel(view);\n  }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n  return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n  return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n  \".cm-diagnostic\": {\n    padding: \"3px 6px 3px 8px\",\n    marginLeft: \"-1px\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\"\n  },\n  \".cm-diagnostic-error\": {\n    borderLeft: \"5px solid #d11\"\n  },\n  \".cm-diagnostic-warning\": {\n    borderLeft: \"5px solid orange\"\n  },\n  \".cm-diagnostic-info\": {\n    borderLeft: \"5px solid #999\"\n  },\n  \".cm-diagnostic-hint\": {\n    borderLeft: \"5px solid #66d\"\n  },\n  \".cm-diagnosticAction\": {\n    font: \"inherit\",\n    border: \"none\",\n    padding: \"2px 4px\",\n    backgroundColor: \"#444\",\n    color: \"white\",\n    borderRadius: \"3px\",\n    marginLeft: \"8px\",\n    cursor: \"pointer\"\n  },\n  \".cm-diagnosticSource\": {\n    fontSize: \"70%\",\n    opacity: .7\n  },\n  \".cm-lintRange\": {\n    backgroundPosition: \"left bottom\",\n    backgroundRepeat: \"repeat-x\",\n    paddingBottom: \"0.7px\"\n  },\n  \".cm-lintRange-error\": {\n    backgroundImage: /*@__PURE__*/underline(\"#d11\")\n  },\n  \".cm-lintRange-warning\": {\n    backgroundImage: /*@__PURE__*/underline(\"orange\")\n  },\n  \".cm-lintRange-info\": {\n    backgroundImage: /*@__PURE__*/underline(\"#999\")\n  },\n  \".cm-lintRange-hint\": {\n    backgroundImage: /*@__PURE__*/underline(\"#66d\")\n  },\n  \".cm-lintRange-active\": {\n    backgroundColor: \"#ffdd9980\"\n  },\n  \".cm-tooltip-lint\": {\n    padding: 0,\n    margin: 0\n  },\n  \".cm-lintPoint\": {\n    position: \"relative\",\n    \"&:after\": {\n      content: '\"\"',\n      position: \"absolute\",\n      bottom: 0,\n      left: \"-2px\",\n      borderLeft: \"3px solid transparent\",\n      borderRight: \"3px solid transparent\",\n      borderBottom: \"4px solid #d11\"\n    }\n  },\n  \".cm-lintPoint-warning\": {\n    \"&:after\": {\n      borderBottomColor: \"orange\"\n    }\n  },\n  \".cm-lintPoint-info\": {\n    \"&:after\": {\n      borderBottomColor: \"#999\"\n    }\n  },\n  \".cm-lintPoint-hint\": {\n    \"&:after\": {\n      borderBottomColor: \"#66d\"\n    }\n  },\n  \".cm-panel.cm-panel-lint\": {\n    position: \"relative\",\n    \"& ul\": {\n      maxHeight: \"100px\",\n      overflowY: \"auto\",\n      \"& [aria-selected]\": {\n        backgroundColor: \"#ddd\",\n        \"& u\": {\n          textDecoration: \"underline\"\n        }\n      },\n      \"&:focus [aria-selected]\": {\n        background_fallback: \"#bdf\",\n        backgroundColor: \"Highlight\",\n        color_fallback: \"white\",\n        color: \"HighlightText\"\n      },\n      \"& u\": {\n        textDecoration: \"none\"\n      },\n      padding: 0,\n      margin: 0\n    },\n    \"& [name=close]\": {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"2px\",\n      background: \"inherit\",\n      border: \"none\",\n      font: \"inherit\",\n      padding: 0,\n      margin: 0\n    }\n  }\n});\nfunction severityWeight(sev) {\n  return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\nclass LintGutterMarker extends GutterMarker {\n  constructor(diagnostics) {\n    super();\n    this.diagnostics = diagnostics;\n    this.severity = diagnostics.reduce((max, d) => severityWeight(max) < severityWeight(d.severity) ? d.severity : max, \"hint\");\n  }\n  toDOM(view) {\n    let elt = document.createElement(\"div\");\n    elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n    let diagnostics = this.diagnostics;\n    let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n    if (diagnosticsFilter) diagnostics = diagnosticsFilter(diagnostics, view.state);\n    if (diagnostics.length) elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n    return elt;\n  }\n}\nfunction trackHoverOn(view, marker) {\n  let mousemove = event => {\n    let rect = marker.getBoundingClientRect();\n    if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ && event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */) return;\n    for (let target = event.target; target; target = target.parentNode) {\n      if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\")) return;\n    }\n    window.removeEventListener(\"mousemove\", mousemove);\n    if (view.state.field(lintGutterTooltip)) view.dispatch({\n      effects: setLintGutterTooltip.of(null)\n    });\n  };\n  window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n  function hovered() {\n    let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n    const linePos = view.coordsAtPos(line.from);\n    if (linePos) {\n      view.dispatch({\n        effects: setLintGutterTooltip.of({\n          pos: line.from,\n          above: false,\n          create() {\n            return {\n              dom: diagnosticsTooltip(view, diagnostics),\n              getCoords: () => marker.getBoundingClientRect()\n            };\n          }\n        })\n      });\n    }\n    marker.onmouseout = marker.onmousemove = null;\n    trackHoverOn(view, marker);\n  }\n  let {\n    hoverTime\n  } = view.state.facet(lintGutterConfig);\n  let hoverTimeout = setTimeout(hovered, hoverTime);\n  marker.onmouseout = () => {\n    clearTimeout(hoverTimeout);\n    marker.onmouseout = marker.onmousemove = null;\n  };\n  marker.onmousemove = () => {\n    clearTimeout(hoverTimeout);\n    hoverTimeout = setTimeout(hovered, hoverTime);\n  };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n  let byLine = Object.create(null);\n  for (let diagnostic of diagnostics) {\n    let line = doc.lineAt(diagnostic.from);\n    (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n  }\n  let markers = [];\n  for (let line in byLine) {\n    markers.push(new LintGutterMarker(byLine[line]).range(+line));\n  }\n  return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n  class: \"cm-gutter-lint\",\n  markers: view => view.state.field(lintGutterMarkers)\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n  create() {\n    return RangeSet.empty;\n  },\n  update(markers, tr) {\n    markers = markers.map(tr.changes);\n    let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n    for (let effect of tr.effects) {\n      if (effect.is(setDiagnosticsEffect)) {\n        let diagnostics = effect.value;\n        if (diagnosticFilter) diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n        markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n      }\n    }\n    return markers;\n  }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n  create() {\n    return null;\n  },\n  update(tooltip, tr) {\n    if (tooltip && tr.docChanged) tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), {\n      pos: tr.changes.mapPos(tooltip.pos)\n    });\n    return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n  },\n  provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n  \".cm-gutter-lint\": {\n    width: \"1.4em\",\n    \"& .cm-gutterElement\": {\n      padding: \".2em\"\n    }\n  },\n  \".cm-lint-marker\": {\n    width: \"1em\",\n    height: \"1em\"\n  },\n  \".cm-lint-marker-info\": {\n    content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n  },\n  \".cm-lint-marker-warning\": {\n    content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`)\n  },\n  \".cm-lint-marker-error\": {\n    content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n  }\n});\nconst lintExtensions = [lintState, /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\n  let {\n    selected,\n    panel\n  } = state.field(lintState);\n  return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([activeMark.range(selected.from, selected.to)]);\n}), /*@__PURE__*/hoverTooltip(lintTooltip, {\n  hideOn: hideTooltip\n}), baseTheme];\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n  combine(configs) {\n    return combineConfig(configs, {\n      hoverTime: 300 /* Hover.Time */,\n      markerFilter: null,\n      tooltipFilter: null\n    });\n  }\n});\n/**\r\nReturns an extension that installs a gutter showing markers for\r\neach line that has diagnostics, which can be hovered over to see\r\nthe diagnostics.\r\n*/\nfunction lintGutter(config = {}) {\n  return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\r\nIterate over the marked diagnostics for the given editor state,\r\ncalling `f` for each of them. Note that, if the document changed\r\nsince the diagnostics were created, the `Diagnostic` object will\r\nhold the original outdated position, whereas the `to` and `from`\r\narguments hold the diagnostic's current position.\r\n*/\nfunction forEachDiagnostic(state, f) {\n  let lState = state.field(lintState, false);\n  if (lState && lState.diagnostics.size) for (let iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next()) f(iter.value.spec.diagnostic, iter.from, iter.to);\n}\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };","map":{"version":3,"names":["Decoration","showPanel","EditorView","ViewPlugin","logException","gutter","showTooltip","hoverTooltip","getPanel","WidgetType","GutterMarker","StateEffect","StateField","Facet","combineConfig","RangeSet","elt","SelectedDiagnostic","constructor","from","to","diagnostic","LintState","diagnostics","panel","selected","init","state","markedDiagnostics","diagnosticFilter","facet","lintConfig","markerFilter","ranges","set","map","d","doc","lineAt","widget","DiagnosticWidget","range","mark","attributes","class","severity","markClass","inclusive","findDiagnostic","after","found","between","spec","hideTooltip","tr","tooltip","line","startState","pos","effects","some","e","is","setDiagnosticsEffect","changes","touchesRange","maybeEnableLint","field","lintState","concat","appendConfig","of","lintExtensions","setDiagnostics","define","togglePanel","movePanelSelection","create","none","update","value","docChanged","mapped","selPos","mapPos","effect","LintPanel","open","provide","f","val","decorations","s","diagnosticCount","lint","size","activeMark","lintTooltip","view","side","stackStart","stackEnd","push","Math","min","max","tooltipFilter","length","end","above","dom","diagnosticsTooltip","renderDiagnostic","openLintPanel","dispatch","querySelector","focus","closeLintPanel","nextDiagnostic","sel","selection","main","next","iter","anchor","head","scrollIntoView","previousDiagnostic","prevFrom","prevTo","lastFrom","lastTo","lintKeymap","key","run","preventDefault","lintPlugin","fromClass","timeout","delay","lintTime","Date","now","bind","setTimeout","sources","Promise","all","source","resolve","then","annotations","reduce","a","b","error","config","needsRefresh","force","destroy","clearTimeout","combine","input","Object","assign","i","filter","x","u","linter","forceLinting","plugin","assignKeys","actions","assigned","name","ch","test","c","toLowerCase","inPanel","_a","keys","renderMessage","message","action","fired","click","apply","keyIndex","indexOf","nameElt","slice","type","onclick","onmousedown","eq","other","toDOM","PanelItem","id","floor","random","toString","setAttribute","items","onkeydown","event","keyCode","moveSelection","selectedIndex","toUpperCase","charCodeAt","contains","target","list","tabIndex","role","phrase","needsSync","newSelectedItem","_start","_end","item","j","splice","hasAttribute","removeAttribute","pop","requestMeasure","read","getBoundingClientRect","write","scaleY","height","offsetHeight","top","scrollTop","bottom","sync","domPos","firstChild","rm","prev","nextSibling","remove","parentNode","insertBefore","svg","content","attrs","encodeURIComponent","underline","color","baseTheme","padding","marginLeft","display","whiteSpace","borderLeft","font","border","backgroundColor","borderRadius","cursor","fontSize","opacity","backgroundPosition","backgroundRepeat","paddingBottom","backgroundImage","margin","position","left","borderRight","borderBottom","borderBottomColor","maxHeight","overflowY","textDecoration","background_fallback","color_fallback","right","background","severityWeight","sev","LintGutterMarker","document","createElement","className","diagnosticsFilter","lintGutterConfig","onmouseover","gutterMarkerMouseOver","trackHoverOn","marker","mousemove","rect","clientX","clientY","nodeType","classList","window","removeEventListener","lintGutterTooltip","setLintGutterTooltip","addEventListener","hovered","elementAtHeight","documentTop","linePos","coordsAtPos","getCoords","onmouseout","onmousemove","hoverTime","hoverTimeout","markersForDiagnostics","byLine","markers","lintGutterExtension","lintGutterMarkers","empty","t","lintGutterTheme","width","compute","hideOn","configs","lintGutter","forEachDiagnostic","lState"],"sources":["C:/Users/dharm/Documents/Dharm/Human Computer Interaction/DevFlow-1/node_modules/@codemirror/lint/dist/index.js"],"sourcesContent":["import { Decoration, showPanel, EditorView, ViewPlugin, logException, gutter, showTooltip, hoverTooltip, getPanel, WidgetType, GutterMarker } from '@codemirror/view';\r\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\r\nimport elt from 'crelt';\r\n\r\nclass SelectedDiagnostic {\r\n    constructor(from, to, diagnostic) {\r\n        this.from = from;\r\n        this.to = to;\r\n        this.diagnostic = diagnostic;\r\n    }\r\n}\r\nclass LintState {\r\n    constructor(diagnostics, panel, selected) {\r\n        this.diagnostics = diagnostics;\r\n        this.panel = panel;\r\n        this.selected = selected;\r\n    }\r\n    static init(diagnostics, panel, state) {\r\n        // Filter the list of diagnostics for which to create markers\r\n        let markedDiagnostics = diagnostics;\r\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\r\n        if (diagnosticFilter)\r\n            markedDiagnostics = diagnosticFilter(markedDiagnostics, state);\r\n        let ranges = Decoration.set(markedDiagnostics.map((d) => {\r\n            // For zero-length ranges or ranges covering only a line break, create a widget\r\n            return d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)\r\n                ? Decoration.widget({\r\n                    widget: new DiagnosticWidget(d),\r\n                    diagnostic: d\r\n                }).range(d.from)\r\n                : Decoration.mark({\r\n                    attributes: { class: \"cm-lintRange cm-lintRange-\" + d.severity + (d.markClass ? \" \" + d.markClass : \"\") },\r\n                    diagnostic: d,\r\n                    inclusive: true\r\n                }).range(d.from, d.to);\r\n        }), true);\r\n        return new LintState(ranges, panel, findDiagnostic(ranges));\r\n    }\r\n}\r\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\r\n    let found = null;\r\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\r\n        if (diagnostic && spec.diagnostic != diagnostic)\r\n            return;\r\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\r\n        return false;\r\n    });\r\n    return found;\r\n}\r\nfunction hideTooltip(tr, tooltip) {\r\n    let line = tr.startState.doc.lineAt(tooltip.pos);\r\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, line.to));\r\n}\r\nfunction maybeEnableLint(state, effects) {\r\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\r\n}\r\n/**\r\nReturns a transaction spec which updates the current set of\r\ndiagnostics, and enables the lint extension if if wasn't already\r\nactive.\r\n*/\r\nfunction setDiagnostics(state, diagnostics) {\r\n    return {\r\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\r\n    };\r\n}\r\n/**\r\nThe state effect that updates the set of active diagnostics. Can\r\nbe useful when writing an extension that needs to track these.\r\n*/\r\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\r\nconst togglePanel = /*@__PURE__*/StateEffect.define();\r\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\r\nconst lintState = /*@__PURE__*/StateField.define({\r\n    create() {\r\n        return new LintState(Decoration.none, null, null);\r\n    },\r\n    update(value, tr) {\r\n        if (tr.docChanged) {\r\n            let mapped = value.diagnostics.map(tr.changes), selected = null;\r\n            if (value.selected) {\r\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\r\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\r\n            }\r\n            value = new LintState(mapped, value.panel, selected);\r\n        }\r\n        for (let effect of tr.effects) {\r\n            if (effect.is(setDiagnosticsEffect)) {\r\n                value = LintState.init(effect.value, value.panel, tr.state);\r\n            }\r\n            else if (effect.is(togglePanel)) {\r\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\r\n            }\r\n            else if (effect.is(movePanelSelection)) {\r\n                value = new LintState(value.diagnostics, value.panel, effect.value);\r\n            }\r\n        }\r\n        return value;\r\n    },\r\n    provide: f => [showPanel.from(f, val => val.panel),\r\n        EditorView.decorations.from(f, s => s.diagnostics)]\r\n});\r\n/**\r\nReturns the number of active lint diagnostics in the given state.\r\n*/\r\nfunction diagnosticCount(state) {\r\n    let lint = state.field(lintState, false);\r\n    return lint ? lint.diagnostics.size : 0;\r\n}\r\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\", inclusive: true });\r\nfunction lintTooltip(view, pos, side) {\r\n    let { diagnostics } = view.state.field(lintState);\r\n    let found = [], stackStart = 2e8, stackEnd = 0;\r\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\r\n        if (pos >= from && pos <= to &&\r\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\r\n            found.push(spec.diagnostic);\r\n            stackStart = Math.min(from, stackStart);\r\n            stackEnd = Math.max(to, stackEnd);\r\n        }\r\n    });\r\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\r\n    if (diagnosticFilter)\r\n        found = diagnosticFilter(found, view.state);\r\n    if (!found.length)\r\n        return null;\r\n    return {\r\n        pos: stackStart,\r\n        end: stackEnd,\r\n        above: view.state.doc.lineAt(stackStart).to < stackEnd,\r\n        create() {\r\n            return { dom: diagnosticsTooltip(view, found) };\r\n        }\r\n    };\r\n}\r\nfunction diagnosticsTooltip(view, diagnostics) {\r\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\r\n}\r\n/**\r\nCommand to open and focus the lint panel.\r\n*/\r\nconst openLintPanel = (view) => {\r\n    let field = view.state.field(lintState, false);\r\n    if (!field || !field.panel)\r\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\r\n    let panel = getPanel(view, LintPanel.open);\r\n    if (panel)\r\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\r\n    return true;\r\n};\r\n/**\r\nCommand to close the lint panel, when open.\r\n*/\r\nconst closeLintPanel = (view) => {\r\n    let field = view.state.field(lintState, false);\r\n    if (!field || !field.panel)\r\n        return false;\r\n    view.dispatch({ effects: togglePanel.of(false) });\r\n    return true;\r\n};\r\n/**\r\nMove the selection to the next diagnostic.\r\n*/\r\nconst nextDiagnostic = (view) => {\r\n    let field = view.state.field(lintState, false);\r\n    if (!field)\r\n        return false;\r\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\r\n    if (!next.value) {\r\n        next = field.diagnostics.iter(0);\r\n        if (!next.value || next.from == sel.from && next.to == sel.to)\r\n            return false;\r\n    }\r\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\r\n    return true;\r\n};\r\n/**\r\nMove the selection to the previous diagnostic.\r\n*/\r\nconst previousDiagnostic = (view) => {\r\n    let { state } = view, field = state.field(lintState, false);\r\n    if (!field)\r\n        return false;\r\n    let sel = state.selection.main;\r\n    let prevFrom, prevTo, lastFrom, lastTo;\r\n    field.diagnostics.between(0, state.doc.length, (from, to) => {\r\n        if (to < sel.to && (prevFrom == null || prevFrom < from)) {\r\n            prevFrom = from;\r\n            prevTo = to;\r\n        }\r\n        if (lastFrom == null || from > lastFrom) {\r\n            lastFrom = from;\r\n            lastTo = to;\r\n        }\r\n    });\r\n    if (lastFrom == null || prevFrom == null && lastFrom == sel.from)\r\n        return false;\r\n    view.dispatch({ selection: { anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom, head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo }, scrollIntoView: true });\r\n    return true;\r\n};\r\n/**\r\nA set of default key bindings for the lint functionality.\r\n\r\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\r\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\r\n*/\r\nconst lintKeymap = [\r\n    { key: \"Mod-Shift-m\", run: openLintPanel, preventDefault: true },\r\n    { key: \"F8\", run: nextDiagnostic }\r\n];\r\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\r\n    constructor(view) {\r\n        this.view = view;\r\n        this.timeout = -1;\r\n        this.set = true;\r\n        let { delay } = view.state.facet(lintConfig);\r\n        this.lintTime = Date.now() + delay;\r\n        this.run = this.run.bind(this);\r\n        this.timeout = setTimeout(this.run, delay);\r\n    }\r\n    run() {\r\n        let now = Date.now();\r\n        if (now < this.lintTime - 10) {\r\n            this.timeout = setTimeout(this.run, this.lintTime - now);\r\n        }\r\n        else {\r\n            this.set = false;\r\n            let { state } = this.view, { sources } = state.facet(lintConfig);\r\n            if (sources.length)\r\n                Promise.all(sources.map(source => Promise.resolve(source(this.view)))).then(annotations => {\r\n                    let all = annotations.reduce((a, b) => a.concat(b));\r\n                    if (this.view.state.doc == state.doc)\r\n                        this.view.dispatch(setDiagnostics(this.view.state, all));\r\n                }, error => { logException(this.view.state, error); });\r\n        }\r\n    }\r\n    update(update) {\r\n        let config = update.state.facet(lintConfig);\r\n        if (update.docChanged || config != update.startState.facet(lintConfig) ||\r\n            config.needsRefresh && config.needsRefresh(update)) {\r\n            this.lintTime = Date.now() + config.delay;\r\n            if (!this.set) {\r\n                this.set = true;\r\n                this.timeout = setTimeout(this.run, config.delay);\r\n            }\r\n        }\r\n    }\r\n    force() {\r\n        if (this.set) {\r\n            this.lintTime = Date.now();\r\n            this.run();\r\n        }\r\n    }\r\n    destroy() {\r\n        clearTimeout(this.timeout);\r\n    }\r\n});\r\nconst lintConfig = /*@__PURE__*/Facet.define({\r\n    combine(input) {\r\n        return Object.assign({ sources: input.map(i => i.source).filter(x => x != null) }, combineConfig(input.map(i => i.config), {\r\n            delay: 750,\r\n            markerFilter: null,\r\n            tooltipFilter: null,\r\n            needsRefresh: null\r\n        }, {\r\n            needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\r\n        }));\r\n    }\r\n});\r\n/**\r\nGiven a diagnostic source, this function returns an extension that\r\nenables linting with that source. It will be called whenever the\r\neditor is idle (after its content changed). If `null` is given as\r\nsource, this only configures the lint extension.\r\n*/\r\nfunction linter(source, config = {}) {\r\n    return [\r\n        lintConfig.of({ source, config }),\r\n        lintPlugin,\r\n        lintExtensions\r\n    ];\r\n}\r\n/**\r\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\r\neditor is idle to run right away.\r\n*/\r\nfunction forceLinting(view) {\r\n    let plugin = view.plugin(lintPlugin);\r\n    if (plugin)\r\n        plugin.force();\r\n}\r\nfunction assignKeys(actions) {\r\n    let assigned = [];\r\n    if (actions)\r\n        actions: for (let { name } of actions) {\r\n            for (let i = 0; i < name.length; i++) {\r\n                let ch = name[i];\r\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\r\n                    assigned.push(ch);\r\n                    continue actions;\r\n                }\r\n            }\r\n            assigned.push(\"\");\r\n        }\r\n    return assigned;\r\n}\r\nfunction renderDiagnostic(view, diagnostic, inPanel) {\r\n    var _a;\r\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\r\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage() : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\r\n        let fired = false, click = (e) => {\r\n            e.preventDefault();\r\n            if (fired)\r\n                return;\r\n            fired = true;\r\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\r\n            if (found)\r\n                action.apply(view, found.from, found.to);\r\n        };\r\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\r\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\r\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\r\n            name.slice(keyIndex + 1)];\r\n        return elt(\"button\", {\r\n            type: \"button\",\r\n            class: \"cm-diagnosticAction\",\r\n            onclick: click,\r\n            onmousedown: click,\r\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\r\n        }, nameElt);\r\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\r\n}\r\nclass DiagnosticWidget extends WidgetType {\r\n    constructor(diagnostic) {\r\n        super();\r\n        this.diagnostic = diagnostic;\r\n    }\r\n    eq(other) { return other.diagnostic == this.diagnostic; }\r\n    toDOM() {\r\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity });\r\n    }\r\n}\r\nclass PanelItem {\r\n    constructor(view, diagnostic) {\r\n        this.diagnostic = diagnostic;\r\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\r\n        this.dom = renderDiagnostic(view, diagnostic, true);\r\n        this.dom.id = this.id;\r\n        this.dom.setAttribute(\"role\", \"option\");\r\n    }\r\n}\r\nclass LintPanel {\r\n    constructor(view) {\r\n        this.view = view;\r\n        this.items = [];\r\n        let onkeydown = (event) => {\r\n            if (event.keyCode == 27) { // Escape\r\n                closeLintPanel(this.view);\r\n                this.view.focus();\r\n            }\r\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\r\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\r\n            }\r\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\r\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\r\n            }\r\n            else if (event.keyCode == 36) { // Home\r\n                this.moveSelection(0);\r\n            }\r\n            else if (event.keyCode == 35) { // End\r\n                this.moveSelection(this.items.length - 1);\r\n            }\r\n            else if (event.keyCode == 13) { // Enter\r\n                this.view.focus();\r\n            }\r\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\r\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\r\n                for (let i = 0; i < keys.length; i++)\r\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\r\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\r\n                        if (found)\r\n                            diagnostic.actions[i].apply(view, found.from, found.to);\r\n                    }\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n        };\r\n        let onclick = (event) => {\r\n            for (let i = 0; i < this.items.length; i++) {\r\n                if (this.items[i].dom.contains(event.target))\r\n                    this.moveSelection(i);\r\n            }\r\n        };\r\n        this.list = elt(\"ul\", {\r\n            tabIndex: 0,\r\n            role: \"listbox\",\r\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\r\n            onkeydown,\r\n            onclick\r\n        });\r\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\r\n            type: \"button\",\r\n            name: \"close\",\r\n            \"aria-label\": this.view.state.phrase(\"close\"),\r\n            onclick: () => closeLintPanel(this.view)\r\n        }, \"×\"));\r\n        this.update();\r\n    }\r\n    get selectedIndex() {\r\n        let selected = this.view.state.field(lintState).selected;\r\n        if (!selected)\r\n            return -1;\r\n        for (let i = 0; i < this.items.length; i++)\r\n            if (this.items[i].diagnostic == selected.diagnostic)\r\n                return i;\r\n        return -1;\r\n    }\r\n    update() {\r\n        let { diagnostics, selected } = this.view.state.field(lintState);\r\n        let i = 0, needsSync = false, newSelectedItem = null;\r\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\r\n            let found = -1, item;\r\n            for (let j = i; j < this.items.length; j++)\r\n                if (this.items[j].diagnostic == spec.diagnostic) {\r\n                    found = j;\r\n                    break;\r\n                }\r\n            if (found < 0) {\r\n                item = new PanelItem(this.view, spec.diagnostic);\r\n                this.items.splice(i, 0, item);\r\n                needsSync = true;\r\n            }\r\n            else {\r\n                item = this.items[found];\r\n                if (found > i) {\r\n                    this.items.splice(i, found - i);\r\n                    needsSync = true;\r\n                }\r\n            }\r\n            if (selected && item.diagnostic == selected.diagnostic) {\r\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\r\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\r\n                    newSelectedItem = item;\r\n                }\r\n            }\r\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\r\n                item.dom.removeAttribute(\"aria-selected\");\r\n            }\r\n            i++;\r\n        });\r\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\r\n            needsSync = true;\r\n            this.items.pop();\r\n        }\r\n        if (this.items.length == 0) {\r\n            this.items.push(new PanelItem(this.view, {\r\n                from: -1, to: -1,\r\n                severity: \"info\",\r\n                message: this.view.state.phrase(\"No diagnostics\")\r\n            }));\r\n            needsSync = true;\r\n        }\r\n        if (newSelectedItem) {\r\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\r\n            this.view.requestMeasure({\r\n                key: this,\r\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\r\n                write: ({ sel, panel }) => {\r\n                    let scaleY = panel.height / this.list.offsetHeight;\r\n                    if (sel.top < panel.top)\r\n                        this.list.scrollTop -= (panel.top - sel.top) / scaleY;\r\n                    else if (sel.bottom > panel.bottom)\r\n                        this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\r\n                }\r\n            });\r\n        }\r\n        else if (this.selectedIndex < 0) {\r\n            this.list.removeAttribute(\"aria-activedescendant\");\r\n        }\r\n        if (needsSync)\r\n            this.sync();\r\n    }\r\n    sync() {\r\n        let domPos = this.list.firstChild;\r\n        function rm() {\r\n            let prev = domPos;\r\n            domPos = prev.nextSibling;\r\n            prev.remove();\r\n        }\r\n        for (let item of this.items) {\r\n            if (item.dom.parentNode == this.list) {\r\n                while (domPos != item.dom)\r\n                    rm();\r\n                domPos = item.dom.nextSibling;\r\n            }\r\n            else {\r\n                this.list.insertBefore(item.dom, domPos);\r\n            }\r\n        }\r\n        while (domPos)\r\n            rm();\r\n    }\r\n    moveSelection(selectedIndex) {\r\n        if (this.selectedIndex < 0)\r\n            return;\r\n        let field = this.view.state.field(lintState);\r\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\r\n        if (!selection)\r\n            return;\r\n        this.view.dispatch({\r\n            selection: { anchor: selection.from, head: selection.to },\r\n            scrollIntoView: true,\r\n            effects: movePanelSelection.of(selection)\r\n        });\r\n    }\r\n    static open(view) { return new LintPanel(view); }\r\n}\r\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\r\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\r\n}\r\nfunction underline(color) {\r\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\r\n}\r\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\r\n    \".cm-diagnostic\": {\r\n        padding: \"3px 6px 3px 8px\",\r\n        marginLeft: \"-1px\",\r\n        display: \"block\",\r\n        whiteSpace: \"pre-wrap\"\r\n    },\r\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\r\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\r\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\r\n    \".cm-diagnostic-hint\": { borderLeft: \"5px solid #66d\" },\r\n    \".cm-diagnosticAction\": {\r\n        font: \"inherit\",\r\n        border: \"none\",\r\n        padding: \"2px 4px\",\r\n        backgroundColor: \"#444\",\r\n        color: \"white\",\r\n        borderRadius: \"3px\",\r\n        marginLeft: \"8px\",\r\n        cursor: \"pointer\"\r\n    },\r\n    \".cm-diagnosticSource\": {\r\n        fontSize: \"70%\",\r\n        opacity: .7\r\n    },\r\n    \".cm-lintRange\": {\r\n        backgroundPosition: \"left bottom\",\r\n        backgroundRepeat: \"repeat-x\",\r\n        paddingBottom: \"0.7px\",\r\n    },\r\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\r\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\r\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\r\n    \".cm-lintRange-hint\": { backgroundImage: /*@__PURE__*/underline(\"#66d\") },\r\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\r\n    \".cm-tooltip-lint\": {\r\n        padding: 0,\r\n        margin: 0\r\n    },\r\n    \".cm-lintPoint\": {\r\n        position: \"relative\",\r\n        \"&:after\": {\r\n            content: '\"\"',\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            left: \"-2px\",\r\n            borderLeft: \"3px solid transparent\",\r\n            borderRight: \"3px solid transparent\",\r\n            borderBottom: \"4px solid #d11\"\r\n        }\r\n    },\r\n    \".cm-lintPoint-warning\": {\r\n        \"&:after\": { borderBottomColor: \"orange\" }\r\n    },\r\n    \".cm-lintPoint-info\": {\r\n        \"&:after\": { borderBottomColor: \"#999\" }\r\n    },\r\n    \".cm-lintPoint-hint\": {\r\n        \"&:after\": { borderBottomColor: \"#66d\" }\r\n    },\r\n    \".cm-panel.cm-panel-lint\": {\r\n        position: \"relative\",\r\n        \"& ul\": {\r\n            maxHeight: \"100px\",\r\n            overflowY: \"auto\",\r\n            \"& [aria-selected]\": {\r\n                backgroundColor: \"#ddd\",\r\n                \"& u\": { textDecoration: \"underline\" }\r\n            },\r\n            \"&:focus [aria-selected]\": {\r\n                background_fallback: \"#bdf\",\r\n                backgroundColor: \"Highlight\",\r\n                color_fallback: \"white\",\r\n                color: \"HighlightText\"\r\n            },\r\n            \"& u\": { textDecoration: \"none\" },\r\n            padding: 0,\r\n            margin: 0\r\n        },\r\n        \"& [name=close]\": {\r\n            position: \"absolute\",\r\n            top: \"0\",\r\n            right: \"2px\",\r\n            background: \"inherit\",\r\n            border: \"none\",\r\n            font: \"inherit\",\r\n            padding: 0,\r\n            margin: 0\r\n        }\r\n    }\r\n});\r\nfunction severityWeight(sev) {\r\n    return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\r\n}\r\nclass LintGutterMarker extends GutterMarker {\r\n    constructor(diagnostics) {\r\n        super();\r\n        this.diagnostics = diagnostics;\r\n        this.severity = diagnostics.reduce((max, d) => severityWeight(max) < severityWeight(d.severity) ? d.severity : max, \"hint\");\r\n    }\r\n    toDOM(view) {\r\n        let elt = document.createElement(\"div\");\r\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\r\n        let diagnostics = this.diagnostics;\r\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\r\n        if (diagnosticsFilter)\r\n            diagnostics = diagnosticsFilter(diagnostics, view.state);\r\n        if (diagnostics.length)\r\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\r\n        return elt;\r\n    }\r\n}\r\nfunction trackHoverOn(view, marker) {\r\n    let mousemove = (event) => {\r\n        let rect = marker.getBoundingClientRect();\r\n        if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ &&\r\n            event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */)\r\n            return;\r\n        for (let target = event.target; target; target = target.parentNode) {\r\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\r\n                return;\r\n        }\r\n        window.removeEventListener(\"mousemove\", mousemove);\r\n        if (view.state.field(lintGutterTooltip))\r\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\r\n    };\r\n    window.addEventListener(\"mousemove\", mousemove);\r\n}\r\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\r\n    function hovered() {\r\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\r\n        const linePos = view.coordsAtPos(line.from);\r\n        if (linePos) {\r\n            view.dispatch({ effects: setLintGutterTooltip.of({\r\n                    pos: line.from,\r\n                    above: false,\r\n                    create() {\r\n                        return {\r\n                            dom: diagnosticsTooltip(view, diagnostics),\r\n                            getCoords: () => marker.getBoundingClientRect()\r\n                        };\r\n                    }\r\n                }) });\r\n        }\r\n        marker.onmouseout = marker.onmousemove = null;\r\n        trackHoverOn(view, marker);\r\n    }\r\n    let { hoverTime } = view.state.facet(lintGutterConfig);\r\n    let hoverTimeout = setTimeout(hovered, hoverTime);\r\n    marker.onmouseout = () => {\r\n        clearTimeout(hoverTimeout);\r\n        marker.onmouseout = marker.onmousemove = null;\r\n    };\r\n    marker.onmousemove = () => {\r\n        clearTimeout(hoverTimeout);\r\n        hoverTimeout = setTimeout(hovered, hoverTime);\r\n    };\r\n}\r\nfunction markersForDiagnostics(doc, diagnostics) {\r\n    let byLine = Object.create(null);\r\n    for (let diagnostic of diagnostics) {\r\n        let line = doc.lineAt(diagnostic.from);\r\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\r\n    }\r\n    let markers = [];\r\n    for (let line in byLine) {\r\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\r\n    }\r\n    return RangeSet.of(markers, true);\r\n}\r\nconst lintGutterExtension = /*@__PURE__*/gutter({\r\n    class: \"cm-gutter-lint\",\r\n    markers: view => view.state.field(lintGutterMarkers),\r\n});\r\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\r\n    create() {\r\n        return RangeSet.empty;\r\n    },\r\n    update(markers, tr) {\r\n        markers = markers.map(tr.changes);\r\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\r\n        for (let effect of tr.effects) {\r\n            if (effect.is(setDiagnosticsEffect)) {\r\n                let diagnostics = effect.value;\r\n                if (diagnosticFilter)\r\n                    diagnostics = diagnosticFilter(diagnostics || [], tr.state);\r\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\r\n            }\r\n        }\r\n        return markers;\r\n    }\r\n});\r\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\r\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\r\n    create() { return null; },\r\n    update(tooltip, tr) {\r\n        if (tooltip && tr.docChanged)\r\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\r\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\r\n    },\r\n    provide: field => showTooltip.from(field)\r\n});\r\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\r\n    \".cm-gutter-lint\": {\r\n        width: \"1.4em\",\r\n        \"& .cm-gutterElement\": {\r\n            padding: \".2em\"\r\n        }\r\n    },\r\n    \".cm-lint-marker\": {\r\n        width: \"1em\",\r\n        height: \"1em\"\r\n    },\r\n    \".cm-lint-marker-info\": {\r\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\r\n    },\r\n    \".cm-lint-marker-warning\": {\r\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\r\n    },\r\n    \".cm-lint-marker-error\": {\r\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\r\n    },\r\n});\r\nconst lintExtensions = [\r\n    lintState,\r\n    /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\r\n        let { selected, panel } = state.field(lintState);\r\n        return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\r\n            activeMark.range(selected.from, selected.to)\r\n        ]);\r\n    }),\r\n    /*@__PURE__*/hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\r\n    baseTheme\r\n];\r\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\r\n    combine(configs) {\r\n        return combineConfig(configs, {\r\n            hoverTime: 300 /* Hover.Time */,\r\n            markerFilter: null,\r\n            tooltipFilter: null\r\n        });\r\n    }\r\n});\r\n/**\r\nReturns an extension that installs a gutter showing markers for\r\neach line that has diagnostics, which can be hovered over to see\r\nthe diagnostics.\r\n*/\r\nfunction lintGutter(config = {}) {\r\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\r\n}\r\n/**\r\nIterate over the marked diagnostics for the given editor state,\r\ncalling `f` for each of them. Note that, if the document changed\r\nsince the diagnostics were created, the `Diagnostic` object will\r\nhold the original outdated position, whereas the `to` and `from`\r\narguments hold the diagnostic's current position.\r\n*/\r\nfunction forEachDiagnostic(state, f) {\r\n    let lState = state.field(lintState, false);\r\n    if (lState && lState.diagnostics.size)\r\n        for (let iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next())\r\n            f(iter.value.spec.diagnostic, iter.from, iter.to);\r\n}\r\n\r\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}