{"ast":null,"code":"var _jsxFileName = \"/Users/hajoon/HCI/DevFlow/src/Arrow.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport Xarrow from \"react-xarrows\";\n// import \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst connectPointStyle = {\n  position: \"absolute\",\n  width: 15,\n  height: 15,\n  borderRadius: \"50%\",\n  background: \"black\"\n};\nconst connectPointOffset = {\n  left: {\n    left: 0,\n    top: \"50%\",\n    transform: \"translate(-50%, -50%)\"\n  },\n  right: {\n    left: \"100%\",\n    top: \"50%\",\n    transform: \"translate(-50%, -50%)\"\n  },\n  top: {\n    left: \"50%\",\n    top: 0,\n    transform: \"translate(-50%, -50%)\"\n  },\n  bottom: {\n    left: \"50%\",\n    top: \"100%\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\nconst ConnectPointsWrapper = ({\n  boxId,\n  handler,\n  ref0\n}) => {\n  _s();\n  const ref1 = useRef();\n  const [position, setPosition] = useState({});\n  const [beingDragged, setBeingDragged] = useState(false);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connectPoint\",\n      style: {\n        ...connectPointStyle,\n        ...connectPointOffset[handler],\n        ...position\n      },\n      draggable: true,\n      onDragStart: e => {\n        setBeingDragged(true);\n        e.dataTransfer.setData(\"arrow\", boxId);\n      },\n      onDrag: e => {\n        setPosition({\n          position: \"fixed\",\n          left: e.clientX,\n          top: e.clientY,\n          transform: \"none\",\n          opacity: 0\n        });\n      },\n      ref: ref1,\n      onDragEnd: e => {\n        setPosition({});\n        // e.dataTransfer.setData(\"arrow\", null);\n        setBeingDragged(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this), beingDragged ? /*#__PURE__*/_jsxDEV(Xarrow, {\n      start: ref0,\n      end: ref1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 23\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n};\n_s(ConnectPointsWrapper, \"lfgi7sck4XyG2gisYiCD8gd7Bfg=\");\n_c = ConnectPointsWrapper;\nconst boxStyle = {\n  border: \"1px solid black\",\n  position: \"relative\",\n  padding: \"20px 10px\"\n};\nconst Box = ({\n  text,\n  handler,\n  addArrow,\n  boxId\n}) => {\n  _s2();\n  const ref0 = useRef();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: boxId,\n    style: boxStyle,\n    ref: ref0,\n    onDragOver: e => e.preventDefault(),\n    onDrop: e => {\n      if (e.dataTransfer.getData(\"arrow\") === boxId) {\n        console.log(e.dataTransfer.getData(\"arrow\"), boxId);\n      } else {\n        const refs = {\n          start: e.dataTransfer.getData(\"arrow\"),\n          end: boxId\n        };\n        addArrow(refs);\n        console.log(\"droped!\", refs);\n      }\n    },\n    children: [text, /*#__PURE__*/_jsxDEV(ConnectPointsWrapper, {\n      boxId,\n      handler,\n      ref0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s2(Box, \"TzpqAa42zQQ2C/ITbkO0uo8DPcM=\");\n_c2 = Box;\nexport default function App() {\n  _s3();\n  const [arrows, setArrows] = useState([]);\n  const addArrow = ({\n    start,\n    end\n  }) => {\n    setArrows([...arrows, {\n      start,\n      end\n    }]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-evenly\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      text: \"drag my handler to second element\",\n      addArrow,\n      handler: \"right\",\n      boxId: \"box2_1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      text: \"second element\",\n      addArrow,\n      handler: \"left\",\n      boxId: \"box2_2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), arrows.map(ar => /*#__PURE__*/_jsxDEV(Xarrow, {\n      start: ar.start,\n      end: ar.end\n    }, ar.start + \"-.\" + ar.start, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"+F5MWakBHQ7ZDUj3DMjgRGi/m64=\");\n_c3 = App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ConnectPointsWrapper\");\n$RefreshReg$(_c2, \"Box\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useRef","useState","Xarrow","jsxDEV","_jsxDEV","connectPointStyle","position","width","height","borderRadius","background","connectPointOffset","left","top","transform","right","bottom","ConnectPointsWrapper","boxId","handler","ref0","_s","ref1","setPosition","beingDragged","setBeingDragged","Fragment","children","className","style","draggable","onDragStart","e","dataTransfer","setData","onDrag","clientX","clientY","opacity","ref","onDragEnd","fileName","_jsxFileName","lineNumber","columnNumber","start","end","_c","boxStyle","border","padding","Box","text","addArrow","_s2","id","onDragOver","preventDefault","onDrop","getData","console","log","refs","_c2","App","_s3","arrows","setArrows","display","justifyContent","map","ar","_c3","$RefreshReg$"],"sources":["/Users/hajoon/HCI/DevFlow/src/Arrow.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport Xarrow from \"react-xarrows\";\n// import \"./styles.css\";\n\nconst connectPointStyle = {\n  position: \"absolute\",\n  width: 15,\n  height: 15,\n  borderRadius: \"50%\",\n  background: \"black\"\n};\nconst connectPointOffset = {\n  left: { left: 0, top: \"50%\", transform: \"translate(-50%, -50%)\" },\n  right: { left: \"100%\", top: \"50%\", transform: \"translate(-50%, -50%)\" },\n  top: { left: \"50%\", top: 0, transform: \"translate(-50%, -50%)\" },\n  bottom: { left: \"50%\", top: \"100%\", transform: \"translate(-50%, -50%)\" }\n};\n\nconst ConnectPointsWrapper = ({ boxId, handler, ref0 }) => {\n  const ref1 = useRef();\n\n  const [position, setPosition] = useState({});\n  const [beingDragged, setBeingDragged] = useState(false);\n  return (\n    <React.Fragment>\n      <div\n        className=\"connectPoint\"\n        style={{\n          ...connectPointStyle,\n          ...connectPointOffset[handler],\n          ...position\n        }}\n        draggable\n        onDragStart={e => {\n          setBeingDragged(true);\n          e.dataTransfer.setData(\"arrow\", boxId);\n        }}\n        onDrag={e => {\n          setPosition({\n            position: \"fixed\",\n            left: e.clientX,\n            top: e.clientY,\n            transform: \"none\",\n            opacity: 0\n          });\n        }}\n        ref={ref1}\n        onDragEnd={e => {\n          setPosition({});\n          // e.dataTransfer.setData(\"arrow\", null);\n          setBeingDragged(false);\n        }}\n      />\n      {beingDragged ? <Xarrow start={ref0} end={ref1} /> : null}\n    </React.Fragment>\n  );\n};\n\nconst boxStyle = {\n  border: \"1px solid black\",\n  position: \"relative\",\n  padding: \"20px 10px\"\n};\n\nconst Box = ({ text, handler, addArrow, boxId }) => {\n  const ref0 = useRef();\n  return (\n    <div\n      id={boxId}\n      style={boxStyle}\n      ref={ref0}\n      onDragOver={e => e.preventDefault()}\n      onDrop={e => {\n        if (e.dataTransfer.getData(\"arrow\") === boxId) {\n          console.log(e.dataTransfer.getData(\"arrow\"), boxId);\n        } else {\n          const refs = { start: e.dataTransfer.getData(\"arrow\"), end: boxId };\n          addArrow(refs);\n          console.log(\"droped!\", refs);\n        }\n      }}\n    >\n      {text}\n      <ConnectPointsWrapper {...{ boxId, handler, ref0 }} />\n    </div>\n  );\n};\n\nexport default function App() {\n  const [arrows, setArrows] = useState([]);\n  const addArrow = ({ start, end }) => {\n    setArrows([...arrows, { start, end }]);\n  };\n  return (\n    <div style={{ display: \"flex\", justifyContent: \"space-evenly\" }}>\n      {/* two boxes */}\n      <Box\n        text=\"drag my handler to second element\"\n        {...{ addArrow, handler: \"right\", boxId: \"box2_1\" }}\n      />\n      <Box\n        text=\"second element\"\n        {...{ addArrow, handler: \"left\", boxId: \"box2_2\" }}\n      />\n      {arrows.map(ar => (\n        <Xarrow\n          start={ar.start}\n          end={ar.end}\n          key={ar.start + \"-.\" + ar.start}\n        />\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}